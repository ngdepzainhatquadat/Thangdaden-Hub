-- Tạo ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.Name = "ThangdadenHubGui"

-- Khung chính (giống W-Aruze True V2)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 300, 0, 400)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- Nút Menu (đóng/mở)
local MenuButton = Instance.new("TextButton")
MenuButton.Size = UDim2.new(0, 60, 0, 30)
MenuButton.Position = UDim2.new(0, 10, 0, 10)
MenuButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MenuButton.Text = "Menu"
MenuButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MenuButton.Parent = MainFrame
local isOpen = true
MenuButton.MouseButton1Click:Connect(function()
    isOpen = not isOpen
    if not isOpen then
        MainFrame.Size = UDim2.new(0, 70, 0, 40)
        ContentFrame.Visible = false
    else
        MainFrame.Size = UDim2.new(0, 300, 0, 400)
        ContentFrame.Visible = true
    end
end)

-- Animation (Youtube: TBoy Roblox)
local AnimationLabel = Instance.new("TextLabel")
AnimationLabel.Size = UDim2.new(1, 0, 0, 30)
AnimationLabel.BackgroundTransparency = 1
AnimationLabel.Text = "Youtube: TBoy Roblox"
AnimationLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AnimationLabel.Font = Enum.Font.SourceSansBold
AnimationLabel.TextSize = 16
AnimationLabel.Parent = MainFrame

-- Nút Minimize (giống Redz V2)
local MinimizeButton = Instance.new("ImageButton")
MinimizeButton.Size = UDim2.new(0, 60, 0, 30)
MinimizeButton.Position = UDim2.new(1, -70, 0, 10)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
MinimizeButton.Image = "http://www.roblox.com/asset/?id=83190276951914"
MinimizeButton.Parent = MainFrame
MinimizeButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

-- Khung nội dung (danh sách thẳng đứng)
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(0, 280, 0, 360)
ContentFrame.Position = UDim2.new(0, 10, 0, 40)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- Hàm tạo toggle
local function createToggle(name, default, callback)
    local Toggle = Instance.new("TextButton")
    Toggle.Size = UDim2.new(1, -20, 0, 30)
    Toggle.Position = UDim2.new(0, 0, 0, (#ContentFrame:GetChildren() - 1) * 35)
    Toggle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Toggle.Text = name .. ": " .. (default and "ON" or "OFF")
    Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    Toggle.Parent = ContentFrame

    local ToggleState = default
    Toggle.MouseButton1Click:Connect(function()
        ToggleState = not ToggleState
        Toggle.Text = name .. ": " .. (ToggleState and "ON" or "OFF")
        if ToggleState then
            Toggle.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
        else
            Toggle.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        end
        callback(ToggleState)
    end)
    if default then
        Toggle.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
    end
end

-- Khai báo biến cơ bản
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

-- Hàm kiểm tra mục tiêu còn sống
local function isAlive(target)
    local targetHumanoid = target:FindFirstChild("Humanoid")
    return targetHumanoid and targetHumanoid.Health > 0
end

-- Hàm dịch chuyển
local function teleportTo(position)
    humanoidRootPart.CFrame = CFrame.new(position)
end

-- Hàm tấn công mượt mà
local function smoothAttack(target)
    if isAlive(target) then
        teleportTo(target.HumanoidRootPart.Position + Vector3.new(0, 0, -5))
        local tool = character:FindFirstChildOfClass("Tool") or player.Backpack:FindFirstChildOfClass("Tool")
        if tool then
            tool.Parent = character
            humanoid:EquipTool(tool)
            game:GetService("VirtualUser"):CaptureController()
            game:GetService("VirtualUser"):ClickButton1(Vector2.new())
        end
    end
end

-- Hàm Auto Farm (ví dụ)
local function autoFarm()
    for _, npc in pairs(game.Workspace.NPCs:GetChildren()) do
        if isAlive(npc) then
            smoothAttack(npc)
            wait(0.3)
        end
    end
end

-- Thêm toggle vào menu
createToggle("Auto Farm Level", false, function(state)
    if state then
        spawn(function()
            while state do
                autoFarm()
                wait(0.1)
            end
        end)
    end
end)

createToggle("Auto Katakuri", false, function(state)
    if state then
        print("Auto Katakuri: ON")
    end
end)

createToggle("Auto Bone", false, function(state)
    if state then
        print("Auto Bone: ON")
    end
end)

createToggle("Accept Quest", false, function(state)
    if state then
        print("Accept Quest: ON")
    end
end)

createToggle("Kill Aura", false, function(state)
    if state then
        print("Kill Aura: ON")
    end
end)

-- Thông báo khởi động
print("Thangdaden Hub with W-Aruze Style UI Loaded!")
